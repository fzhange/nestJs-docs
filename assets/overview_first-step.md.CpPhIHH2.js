import{_ as s,c as i,o as a,a2 as t}from"./chunks/framework.D1hlZQ02.js";const y=JSON.parse('{"title":"第一步","description":"","frontmatter":{},"headers":[],"relativePath":"overview/first-step.md","filePath":"overview/first-step.md"}'),e={name:"overview/first-step.md"},n=t(`<h1 id="第一步" tabindex="-1">第一步 <a class="header-anchor" href="#第一步" aria-label="Permalink to &quot;第一步&quot;">​</a></h1><p>这系列文章中，您将学习NestJs的核心基础。熟悉Nest应用程序的基础模块，我们将构建一个基础的CRUD应用。</p><h2 id="语言" tabindex="-1">语言 <a class="header-anchor" href="#语言" aria-label="Permalink to &quot;语言&quot;">​</a></h2><p>我们都爱TS，特别是NodeJS。这就是为啥NestJS支持TS也兼容纯JS。NestJs使用最新语言特性，所以如果你要在JS中使用它，我们需要Babel编译器。</p><h2 id="必要的先决条件" tabindex="-1">必要的先决条件 <a class="header-anchor" href="#必要的先决条件" aria-label="Permalink to &quot;必要的先决条件&quot;">​</a></h2><p>nodeJs &gt;= 16</p><h2 id="开始" tabindex="-1">开始 <a class="header-anchor" href="#开始" aria-label="Permalink to &quot;开始&quot;">​</a></h2><p>基于nest-cli初始化项目十分简单</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i -g @nestjs/cli</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new project-name</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>使用严格模式创建一个新的typescript项目，需要传递 --strict 参数</p></div><p>创建后的项目结构如下</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.controller.spec.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.controller.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.module.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.service.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.ts</span></span></code></pre></div><table><thead><tr><th style="text-align:center;">file</th><th style="text-align:center;">description</th></tr></thead><tbody><tr><td style="text-align:center;">app.controller.ts</td><td style="text-align:center;">一个单路由的基础controller</td></tr><tr><td style="text-align:center;">app.controller.spec.ts</td><td style="text-align:center;">controller的单元测试</td></tr><tr><td style="text-align:center;">app.module.ts</td><td style="text-align:center;">应用的根模块</td></tr><tr><td style="text-align:center;">app.service.ts</td><td style="text-align:center;">一个单方法的基础service</td></tr><tr><td style="text-align:center;">main.ts</td><td style="text-align:center;">应用入口</td></tr></tbody></table><p><code>main.ts</code>包含一个<code>async function</code>用来引导整成应用</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { NestFactory } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@nestjs/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { AppModule } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./app.module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bootstrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bootstrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>我们使用核心方法类<code>NestFactory</code>创建一个Nest应用实例。<code>Nest</code>暴露了一些静态方法允许创建一个应用实例。<code>create</code>方法会返回一个满足<code>INestApplication</code>接口的<code>object</code></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>By default, if any error happens while creating the application your app will exit with the code 1. If you want to make it throw an error instead disable the option abortOnError (e.g., NestFactory.create(AppModule, { abortOnError: false })).</p></div><h2 id="平台" tabindex="-1">平台 <a class="header-anchor" href="#平台" aria-label="Permalink to &quot;平台&quot;">​</a></h2><p>Nest致力成为一个平台。平台的不依赖性，使其可以创建更多抽象的可复用的逻辑，同时开发者可以发挥不同应用类型的优势。技术上Nest可以适配任何一种Node的Http框架，只要有合适的适配器。这<code>Express</code> <code>fastify</code>两种Http框架是开箱即用的。你可以任选一种你喜欢的。</p><p>无论用哪个platform，都会暴露自己的interface。分别可以看<code>NestExpressApplication</code> and <code>NestFastifyApplication</code></p><p>这里展示一个demo</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NestExpressApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(AppModule);</span></span></code></pre></div><h2 id="running-application" tabindex="-1">Running Application <a class="header-anchor" href="#running-application" aria-label="Permalink to &quot;Running Application&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run start</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To speed up the development process (x20 times faster builds), you can use the SWC builder by passing the -b swc flag to the start script, as follows <code>npm run start -- -b swc</code>.</p></div><p>要实时注意文件中的更改，可以运行以下命令来启动该应用程序：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run start:dev</span></span></code></pre></div><p>此命令将监视你的文件，自动重新编译和重新加载服务器。</p><h2 id="linting-and-formatting" tabindex="-1">Linting and formatting <a class="header-anchor" href="#linting-and-formatting" aria-label="Permalink to &quot;Linting and formatting&quot;">​</a></h2><p>Nest脚手架自带 <code>eslint</code> <code>prettier</code></p><p>针对CI CD、 git hooks etc.可以使用以下脚本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Lint and autofix with eslint</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm run lint</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Format with prettier</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm run format</span></span></code></pre></div>`,32),p=[n];function l(h,r,d,o,k,c){return a(),i("div",null,p)}const F=s(e,[["render",l]]);export{y as __pageData,F as default};
